<form id="event-form" [formGroup]="eventForm">
  <section>
    <p class="section-title">Event Information</p>
    <div class="columns">
      <div class="column is-full">
        <div class="field">
          <label class="label">Title</label>
          <div class="control">
            <input class="input" type="text" formControlName="title">
          </div>
          <p *ngIf="eventForm.get('title').invalid && eventForm.get('title').touched" class="help is-danger">Title is required</p>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="column is-half">
        <div class="field">
          <div id="date-picker">
            <label class="label">Date</label>
            <div class="control">
              <input #courseDate class="input date" type="text" angular-mydatepicker #dp="angular-mydatepicker" name="date" [options]="myDpOptions" (click)="dp.toggleCalendar()" (dateChanged)="onDateChanged($event)" />
            </div>
          </div>
          <p *ngIf="eventForm.get('date').invalid && eventForm.get('date').touched" class="help is-danger">Date is required</p>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <label class="label">Price</label>
          <div class="field has-addons">
            <p class="control"><a class="button is-static">$</a></p>
            <div class="control price-input">
              <input class="input" type="text" formControlName="price">
              <p *ngIf="eventForm.get('price').invalid && eventForm.get('price').touched" class="help is-danger">Price is required</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="column is-half">
        <div class="field">
          <label class="label">Start Time</label>
          <div class="control">
            <div class="select">
              <select formControlName="startTime">
                <option *ngFor="let time of startTimes">{{ time }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="column is-half">
        <div class="field">
          <label class="label">End Time</label>
          <div class="control">
            <div class="select">
              <select formControlName="startTime">
                <option *ngFor="let time of startTimes">{{ time }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="column is-half">
        <div class="field">
          <label class="label">Topics</label>
          <div class="control">
            <input class="input" type="text" (keyup.enter)="addTag($event)" formControlName="tag">
          </div>
          <p class="tag-help">Press enter to add a tag</p>
        </div>
      </div>
      <div class="column is-half tags-container">
        <div class="tags are-medium">
          <span class="tag" *ngFor="let tag of tags; index as index">#{{ tag }} <a class="delete is-small"
              (click)="deleteTag(index)"></a> </span>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="column is-full">
        <div class="field">
          <label class="label">Description</label>
          <textarea class="textarea" rows="6" formControlName="description"></textarea>
        </div>
      </div>
    </div>

    <div class="columns">
      <div class="column is-full">
        <div class="field">
          <label class="label">Image</label>
          <app-image-cropper [defaultImage]="event.img" (imageData)="imageData($event)"></app-image-cropper>
        </div>
      </div>
    </div>
  </section>

  <section>
      <p class="section-title">Event Location</p>
      <div class="columns">
        <div class="column is-full">
          <div class="field">
            <label class="label">Venue</label>
            <div class="control">
              <div class="select">
                <select formControlName="venueId">
                  <ng-container *ngIf="venues">
                    <option *ngFor="let venue of venues" [ngValue]="venue._id" (click)="selectVenue(venue._id)">{{venue.name}}</option>
                  </ng-container>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="columns" *ngIf="selectedVenue">
        <div class="column is-full">
          <div class="field">
            <label class="label">Venue details</label>
            <div class="flex-container">
              <img {{selectedVenue.img}} alt="venue image" class="venue-image">
              <div class="venue-flex-container">
                <p>{{ selectedVenue.address }}</p>
                <p>{{ selectedVenue.zipcode }} {{ selectedVenue.city }}</p>
                <p>{{ selectedVenue.phoneNumber }}</p>
                <a class="website-link" [href]="selectedVenue.website" target="_blank">Venue's website <fa-icon [icon]="faLongArrowAltRight"></fa-icon></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <p class="section-title">Event Teacher</p>
      <div class="columns">
        <div class="column is-full">
          <div class="field">
            <label class="label">Teacher</label>
            <div class="control">
              <div class="select">
                <select formControlName="teacherId">
                  <ng-container *ngIf="teachers">
                    <option *ngFor="let teacher of teachers" [ngValue]="teacher._id" (click)="selectTeacher(teacher._id)">{{ teacher.firstName }} {{ teacher.lastName }}</option>
                  </ng-container>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="columns" *ngIf="selectedTeacher">
        <div class="column is-full">
          <div class="field">
            <label class="label">Teacher details</label>
            <div class="flex-container">
              <img src={{selectedTeacher.img}} alt="teacher image" class="teacher-image">
              <div class="teacher-flex-container">
                <p>{{ selectedTeacher.email }}</p>
                <p>{{ selectedTeacher.phoneNumber }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="buttons">
      <button class="button is-white" routerLink="/manage-events">Cancel</button>
      <button class="button is-link" (click)="submitEventForm()">{{ submitFormBtnText }}</button>
    </div>

</form>
